const assert = require('chai').assert;
const Stream = require('../src/index.js');

describe('Base functionality', () => {
    it('should be notified', () => {
        let test = false;
        const obj = [1, 2, 3];
        const stream = new Stream()
            .then(x => {
                assert.equal(x.length, obj.length);
                test = true;
                return x;
            });
        stream.notify(obj);

        assert.equal(test, true);
    });

    it('should observe brodcasts', () => {
        let test = false;
        const obj = [1, 2, 3];
        const base = new Stream();
        base.then(x => {
            assert.equal(x.length, obj.length);
            test = true;
            return x;
        });
        base.notify(obj);

        assert.equal(test, true);
    });
});